<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIB: mlib::erc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>mlib</b></li><li class="navelem"><a class="el" href="classmlib_1_1erc.html">erc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmlib_1_1erc-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mlib::erc Class Reference<div class="ingroups"><a class="el" href="group__errors.html">Error Error Handling</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>objects returned as a function result or thrown directly.  
 <a href="classmlib_1_1erc.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="errorcode_8h_source.html">errorcode.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mlib::erc:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmlib_1_1erc.png" usemap="#mlib::erc_map" alt=""/>
  <map id="mlib::erc_map" name="mlib::erc_map">
<area href="classmlib_1_1sqerc.html" title="Error codes returned by Database and Query objects." alt="mlib::sqerc" shape="rect" coords="0,56,71,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8c85c4021ed47fef5231c03c84cb3c63"><td class="memItemLeft" align="right" valign="top"><a id="a8c85c4021ed47fef5231c03c84cb3c63"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a8c85c4021ed47fef5231c03c84cb3c63">erc</a> ()</td></tr>
<tr class="memdesc:a8c85c4021ed47fef5231c03c84cb3c63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default ctor for erc objects creates an inactive error. <br /></td></tr>
<tr class="separator:a8c85c4021ed47fef5231c03c84cb3c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a320f96450e4cd33f60de567acbef8"><td class="memItemLeft" align="right" valign="top"><a id="af9a320f96450e4cd33f60de567acbef8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#af9a320f96450e4cd33f60de567acbef8">erc</a> (int value, short int <a class="el" href="classmlib_1_1erc.html#aacd8e492c5358a5de2116aee526372a7">priority</a>=<a class="el" href="errorcode_8h.html#a045f609c6f81928ed19bec8fa95ce978">ERROR_PRI_ERROR</a>, const <a class="el" href="classmlib_1_1errfac.html">errfac</a> *f=0)</td></tr>
<tr class="memdesc:af9a320f96450e4cd33f60de567acbef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ctor for a real erc. <br /></td></tr>
<tr class="separator:af9a320f96450e4cd33f60de567acbef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53189ed92df58baecf1b58124312d6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#ad53189ed92df58baecf1b58124312d6e">erc</a> (const <a class="el" href="classmlib_1_1erc.html">erc</a> &amp;other)</td></tr>
<tr class="memdesc:ad53189ed92df58baecf1b58124312d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor removes the activity flag of the original object.  <a href="classmlib_1_1erc.html#ad53189ed92df58baecf1b58124312d6e">More...</a><br /></td></tr>
<tr class="separator:ad53189ed92df58baecf1b58124312d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d730c269be509d1d85ce62f0e566a4"><td class="memItemLeft" align="right" valign="top"><a id="a59d730c269be509d1d85ce62f0e566a4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a59d730c269be509d1d85ce62f0e566a4">erc</a> (<a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&amp;other)</td></tr>
<tr class="memdesc:a59d730c269be509d1d85ce62f0e566a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor removes the activity flag of the original object. <br /></td></tr>
<tr class="separator:a59d730c269be509d1d85ce62f0e566a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684e1e59d6152aeac16553a0628a896c"><td class="memItemLeft" align="right" valign="top"><a id="a684e1e59d6152aeac16553a0628a896c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a684e1e59d6152aeac16553a0628a896c">~erc</a> () noexcept(false)</td></tr>
<tr class="memdesc:a684e1e59d6152aeac16553a0628a896c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. If we are active, call our facility to see if we get logged or thrown. <br /></td></tr>
<tr class="separator:a684e1e59d6152aeac16553a0628a896c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f22b152ab3aaa2a5077893aa4d9f09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#ad7f22b152ab3aaa2a5077893aa4d9f09">operator=</a> (const <a class="el" href="classmlib_1_1erc.html">erc</a> &amp;rhs)</td></tr>
<tr class="memdesc:ad7f22b152ab3aaa2a5077893aa4d9f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Principal assignment operator.  <a href="classmlib_1_1erc.html#ad7f22b152ab3aaa2a5077893aa4d9f09">More...</a><br /></td></tr>
<tr class="separator:ad7f22b152ab3aaa2a5077893aa4d9f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3641a1930835f3ac2292f9f4db07115b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a3641a1930835f3ac2292f9f4db07115b">operator=</a> (<a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&amp;rhs)</td></tr>
<tr class="memdesc:a3641a1930835f3ac2292f9f4db07115b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assignment operator.  <a href="classmlib_1_1erc.html#a3641a1930835f3ac2292f9f4db07115b">More...</a><br /></td></tr>
<tr class="separator:a3641a1930835f3ac2292f9f4db07115b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c708b44a5e0d670e68ca6152941dfcc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a8c708b44a5e0d670e68ca6152941dfcc">operator int</a> () const</td></tr>
<tr class="memdesc:a8c708b44a5e0d670e68ca6152941dfcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer conversion operator.  <a href="classmlib_1_1erc.html#a8c708b44a5e0d670e68ca6152941dfcc">More...</a><br /></td></tr>
<tr class="separator:a8c708b44a5e0d670e68ca6152941dfcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd8e492c5358a5de2116aee526372a7"><td class="memItemLeft" align="right" valign="top"><a id="aacd8e492c5358a5de2116aee526372a7"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#aacd8e492c5358a5de2116aee526372a7">priority</a> () const</td></tr>
<tr class="memdesc:aacd8e492c5358a5de2116aee526372a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return priority value. <br /></td></tr>
<tr class="separator:aacd8e492c5358a5de2116aee526372a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7cd4b82f8b71b3ce84292dbac333575"><td class="memItemLeft" align="right" valign="top"><a id="ab7cd4b82f8b71b3ce84292dbac333575"></a>
const <a class="el" href="classmlib_1_1errfac.html">errfac</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#ab7cd4b82f8b71b3ce84292dbac333575">facility</a> () const</td></tr>
<tr class="memdesc:ab7cd4b82f8b71b3ce84292dbac333575"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return reference to facility. <br /></td></tr>
<tr class="separator:ab7cd4b82f8b71b3ce84292dbac333575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add2e7365d38fa52c3744671f83cdef01"><td class="memItemLeft" align="right" valign="top"><a id="add2e7365d38fa52c3744671f83cdef01"></a>
<a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#add2e7365d38fa52c3744671f83cdef01">reactivate</a> ()</td></tr>
<tr class="memdesc:add2e7365d38fa52c3744671f83cdef01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to re-throwing an exception. <br /></td></tr>
<tr class="separator:add2e7365d38fa52c3744671f83cdef01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d1b9f9f35c8a0326120d48a3f900c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a95d1b9f9f35c8a0326120d48a3f900c1">deactivate</a> ()</td></tr>
<tr class="memdesc:a95d1b9f9f35c8a0326120d48a3f900c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks error code as inactive.  <a href="classmlib_1_1erc.html#a95d1b9f9f35c8a0326120d48a3f900c1">More...</a><br /></td></tr>
<tr class="separator:a95d1b9f9f35c8a0326120d48a3f900c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d97f6d341427bfa79b5699f2fb0b809"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a1d97f6d341427bfa79b5699f2fb0b809">code</a> () const</td></tr>
<tr class="memdesc:a1d97f6d341427bfa79b5699f2fb0b809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return numerical value.  <a href="classmlib_1_1erc.html#a1d97f6d341427bfa79b5699f2fb0b809">More...</a><br /></td></tr>
<tr class="separator:a1d97f6d341427bfa79b5699f2fb0b809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a230befc71d557d39d4dd18f7ad6269b9"><td class="memItemLeft" align="right" valign="top"><a id="a230befc71d557d39d4dd18f7ad6269b9"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlib_1_1erc.html#a230befc71d557d39d4dd18f7ad6269b9">message</a> () const</td></tr>
<tr class="memdesc:a230befc71d557d39d4dd18f7ad6269b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get logging message. <br /></td></tr>
<tr class="separator:a230befc71d557d39d4dd18f7ad6269b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a72979edc13b0732722ea1793a4708995"><td class="memItemLeft" align="right" valign="top"><a id="a72979edc13b0732722ea1793a4708995"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>errfac</b></td></tr>
<tr class="separator:a72979edc13b0732722ea1793a4708995"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>objects returned as a function result or thrown directly. </p>
<p>If not tested and their level is above facility's logging level they will be logged (by calling <a class="el" href="classmlib_1_1errfac.html#a43fe5ce46412ba0a196443f62eb90d98" title="Logging action. Default is to use dprintf.">errfac::log()</a> ). If the level is above facility's throwing level they will be thrown as exceptions. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad53189ed92df58baecf1b58124312d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53189ed92df58baecf1b58124312d6e">&#9670;&nbsp;</a></span>erc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mlib::erc::erc </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy constructor removes the activity flag of the original object. </p>
<p>Having two erc's active at the same time is a big no-no: when one of them is thrown, the stack unwinding process invokes the destructor of the other one, which in turn might throw again. Throwing an exception during stack unwinding will terminate your application. For more details see: <a href="https://isocpp.org/wiki/faq/exceptions#dtors-shouldnt-throw">https://isocpp.org/wiki/faq/exceptions#dtors-shouldnt-throw</a></p>
<p>However, the whole concept of erc's is based upon destructors throwing exceptions. Here we carefully navigate between a rock and a hard place. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1d97f6d341427bfa79b5699f2fb0b809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d97f6d341427bfa79b5699f2fb0b809">&#9670;&nbsp;</a></span>code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int mlib::erc::code </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return numerical value. </p>
<p>As opposed to the integer conversion operator, this function doesn't change the activity flag. </p>

</div>
</div>
<a id="a95d1b9f9f35c8a0326120d48a3f900c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d1b9f9f35c8a0326120d48a3f900c1">&#9670;&nbsp;</a></span>deactivate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp; mlib::erc::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks error code as inactive. </p>
<p>Useful in catch clauses when we don't really care what the code value is. </p>

</div>
</div>
<a id="a8c708b44a5e0d670e68ca6152941dfcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c708b44a5e0d670e68ca6152941dfcc">&#9670;&nbsp;</a></span>operator int()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mlib::erc::operator int </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Integer conversion operator. </p>
<p>Assume the error has been dealt with and reset the active flag. </p>

</div>
</div>
<a id="ad7f22b152ab3aaa2a5077893aa4d9f09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7f22b152ab3aaa2a5077893aa4d9f09">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp; mlib::erc::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Principal assignment operator. </p>
<p>If we were active before, call the facility to log or throw. Anyhow copy new values from the assigned object and take away it's active flag.</p>
<dl class="section note"><dt>Note</dt><dd>It is rather bad practice to assign to an active erc object. Here we take the view that, since the left side object was already active, we have to deal with it first. </dd></dl>

</div>
</div>
<a id="a3641a1930835f3ac2292f9f4db07115b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3641a1930835f3ac2292f9f4db07115b">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp; mlib::erc::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlib_1_1erc.html">erc</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move assignment operator. </p>
<p>If we were active before, call the facility to log or throw. Anyhow copy new values from the assigned object and take away it's active flag. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/development/mlib/include/mlib/<a class="el" href="errorcode_8h_source.html">errorcode.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
